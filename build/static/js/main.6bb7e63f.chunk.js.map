{"version":3,"sources":["redux/user/user-types.js","redux/user/user-reducer.js","redux/community/community-types.js","redux/community/community-reducer.js","redux/root-reducer.js","redux/store.js","redux/song/song-selectors.js","redux/song/song-types.js","redux/song/song-actions.js","views/components/Transition/LeftLayers.js","views/home/Welcome.js","redux/containers/pages/WelcomeContainer.js","redux/user/user-selectors.js","config/config.js","redux/user/user-actions.js","views/components/Transition/DownLayers.js","utils/routes.js","views/auth/Login.js","redux/containers/pages/LoginContainer.js","assets/accounts/dummy_avatar.png","views/auth/Register.js","redux/containers/pages/RegisterContainer.js","redux/community/community-selectors.js","redux/community/community-actions.js","utils/watchPosition.js","views/components/Header/Header.js","views/components/Marker/Marker.js","assets/map/marker.png","redux/containers/components/MarkerContainer.js","views/map/Map.js","redux/containers/pages/MapContainer.js","hooks/useUpdateLocation.js","views/dashboard/Dashboard.js","redux/containers/pages/DashboardContainer.js","views/profile/Profile.js","redux/containers/pages/ProfileContainer.js","views/chat/Chats.js","redux/containers/pages/ChatsContainer.js","views/components/Messages/Message/Message.js","views/components/Messages/Messages.js","views/components/InfoBar/InfoBar.js","assets/icons/onlineIcon.png","views/components/Input/Input.js","views/chat/ChatRoom.js","redux/containers/pages/ChatRoomContainer.js","views/components/Notification/Notification.js","App.js","index.js"],"names":["UserTypes","FORM_REQUEST","FORM_ERROR","FORM_SUCCESS","LOGIN_REQUEST","LOGIN_ERROR","LOGIN_SUCCESS","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_ERROR","SIGNOUT_REQUEST","SIGNOUT_SUCCESS","SIGNOUT_ERROR","UPDATE_LOCATION_REQUEST","UPDATE_LOCATION_SUCCESS","UPDATE_LOCATION_ERROR","UPDATE_LIKE_REQUEST","UPDATE_LIKE_SUCCESS","UPDATE_LIKE_ERROR","UserInitialState","isLoggingIn","loginError","isAuthenticated","isSigningUp","signUpError","isUpdatingPosition","updatingPositionError","isSigningOut","signOutError","signInForm","signInFormLoad","signInFormError","currentUser","name","token","avatar","position","lat","long","UserReducer","state","action","type","payload","lastname","email","UPDATE_POSITION_REQUEST","UPDATE_POSITION_SUCCESS","UPDATE_POSITION_ERROR","loadingLike","likeError","like","CommunityTypes","FETCH_NEAR_PEOPLE","FETCH_NEAR_PEOPLE_ERROR","FETCH_NEAR_PEOPLE_SUCCESS","GET_PROFILE_REQUEST","GET_PROFILE_SUCCESS","GET_PROFILE_ERROR","GET_CHATS_REQUEST","GET_CHATS_SUCCESS","GET_CHATS_ERROR","OPEN_CHAT_ROOM_REQUEST","OPEN_CHAT_ROOM_SUCCESS","OPEN_CHAT_ROOM_ERROR","CommunityInitialState","nearPeopleLoading","nearPeopleLoadingError","nearPeopleData","loadingProfile","profileError","profile","chatsLoading","chatsError","chats","openChatLoading","openChatError","openChatData","CommunityReducer","rootReducer","combineReducers","user","community","persistConfig","key","storage","persistedReducer","persistReducer","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","persistor","persistStore","songStateSelector","createSelector","song","songState","SongTypes","FETCH_SONG_REQUEST","FETCH_SONG_ERROR","FETCH_SONG_SUCCESS","SONG_UPDATING","SONG_UPDATING_ERROR","ADD_SONG_LIKE","REMOVE_SONG_LIKE","fetchSongError","errorMessage","ScreenTransition","active","className","Welcome","useState","transition","setTransition","history","useHistory","Container","fluid","Row","Col","xs","md","lg","size","onClick","setTimeout","push","connect","dispatch","fetchSong","a","fetch","method","headers","catch","error","console","log","message","res","json","songJson","ok","data","selectUser","currentUserStateSelector","apiDomain","getProfileURI","getChatsURI","loginSuccess","signupSuccess","signoutError","updateLocationSuccess","point","updateLocationError","updateLikeError","updateUserLocation","getState","Authorization","body","JSON","stringify","updateLike","receiver","resJson","ROUTES","HOME","LOGIN","REGISTER","DASHBOARD","MAP","PROFILE","CHAT","ROOMS","Login","currentUserState","login","setEmail","password","setPassword","formError","setFormError","useEffect","to","Spinner","animation","variant","Form","Control","placeholder","onChange","e","target","value","length","role","window","location","Register","fetchFormData","signup","useLocation","setName","setAvatar","coord","setCoord","code","parse","search","ignoreQueryPrefix","display_name","images","url","dummyAvatar","id","htmlFor","src","alt","Check","label","navigator","geolocation","getCurrentPosition","pos","coordinates","coords","longitude","latitude","err","newUser","spotifyID","tokens","access_token","refreshToken","refresh_token","form","signUp","Signup","communityStateSelector","communityState","fetchNearPeopleError","getProfileSuccess","getProfileError","getChatsError","openRoomError","getChats","positionWatcher","updatePosition","watcherId","options","enableHighAccuracy","timeout","maximumAge","watchPosition","crd","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","sin","cos","c","atan2","sqrt","measure","clearWatch","warn","Header","title","back","xl","span","offset","color","DefaultIcon","L","icon","iconUrl","shadowUrl","iconShadow","iconSize","iconAnchor","shadowAnchor","popupAnchor","Marker","prototype","openChatRoom","appSocket","currentSong","songLike","setSongLike","handleLike","emit","sender","room","_id","Popup","image","music","artist","participant","MapView","fetchNearPeople","setPoint","pointError","setPointError","moved","setMoved","ChangeView","center","map","useMap","setView","watcher","zoom","scrollWheelZoom","TileLayer","attribution","nearPeopleJson","nearPeople","Map","useUpdateLocation","setCoords","Dashboard","logout","Profile","getProfile","updateProfile","useParams","totalLikes","likes","total","mostLiked","likesCount","ChatsView","Chats","Message","text","isSentByCurrentUser","trimmedName","trim","toLowerCase","ReactEmoji","emojify","Messages","messages","i","InfoBar","Input","setMessage","sendMessage","onKeyPress","event","ChatRoom","connected","setConnected","setMessages","on","off","preventDefault","alert","Notification","msg","hide","setHide","App","useSelector","notification","setNotification","socket","io","withCredentials","query","path","exact","WelcomeContainer","LoginContainer","DashboardContainer","ProfileContainer","RegisterContainer","ChatsContainer","ChatRoomContainer","ReactDOM","render","loading","document","getElementById"],"mappings":"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","file":"static/js/main.6bb7e63f.chunk.js","sourcesContent":["const UserTypes = {\r\n  FORM_REQUEST: \"FORM_REQUEST\",\r\n  FORM_ERROR: \"FORM_ERROR\",\r\n  FORM_SUCCESS: \"FORM_SUCCESS\",\r\n  LOGIN_REQUEST: \"LOGIN_REQUEST\",\r\n  LOGIN_ERROR: \"LOGIN_ERROR\",\r\n  LOGIN_SUCCESS: \"LOGIN_SUCCESS\",\r\n  SIGNUP_REQUEST: \"SIGNUP_REQUEST\",\r\n  SIGNUP_SUCCESS: \"SIGNUP_SUCCESS\",\r\n  SIGNUP_ERROR: \"SIGNUP_ERROR\",\r\n  SIGNOUT_REQUEST: \"SIGNOUT_REQUEST\",\r\n  SIGNOUT_SUCCESS: \"SIGNOUT_SUCCESS\",\r\n  SIGNOUT_ERROR: \"SIGNOUT_ERROR\",\r\n  UPDATE_LOCATION_REQUEST : \"UPDATE_LOCATION_REQUEST\",\r\n  UPDATE_LOCATION_SUCCESS : \"UPDATE_LOCATION_SUCCESS\",\r\n  UPDATE_LOCATION_ERROR : \"UPDATE_LOCATION_ERROR\",\r\n  UPDATE_LIKE_REQUEST : \"UPDATE_LIKE_REQUEST\",\r\n  UPDATE_LIKE_SUCCESS : \"UPDATE_LIKE_SUCCESS\",\r\n  UPDATE_LIKE_ERROR : \"UPDATE_LIKE_ERROR\",\r\n};\r\n\r\nexport default UserTypes;\r\n","import UserTypes from \"./user-types\";\r\n\r\nexport const UserInitialState = {\r\n  isLoggingIn: false,\r\n  loginError: null,\r\n  isAuthenticated: false,\r\n  isSigningUp: false,\r\n  signUpError: null,\r\n  isUpdatingPosition: false,\r\n  updatingPositionError: null,\r\n  isSigningOut: false,\r\n  signOutError: null,\r\n  signInForm: null,\r\n  signInFormLoad: null,\r\n  signInFormError: null,\r\n  currentUser: {\r\n    name: null,\r\n    token: null,\r\n    avatar: null,\r\n    position: {\r\n      lat: null,\r\n      long: null,\r\n    },\r\n  },\r\n};\r\n\r\nconst UserReducer = (state = UserInitialState, action) => {\r\n  switch (action.type) {\r\n    case UserTypes.SIGNUP_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isSigningUp: true,\r\n        signUpError: null,\r\n      };\r\n    }\r\n    case UserTypes.SIGNUP_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        isSigningUp: false,\r\n        loginError: null,\r\n        currentUser: {\r\n          name: action.payload.name,\r\n          token: action.payload.token,\r\n          avatar: action.payload.avatar,\r\n        },\r\n      };\r\n    }\r\n    case UserTypes.SIGNUP_ERROR: {\r\n      return {\r\n        ...state,\r\n        isSigningUp: false,\r\n        signUpError: action.payload,\r\n      };\r\n    }\r\n    case UserTypes.FORM_REQUEST: {\r\n      return {\r\n        ...state,\r\n        signInFormLoad: true,\r\n        signInFormError: null,\r\n        signUpError: null\r\n      };\r\n    }\r\n    case UserTypes.FORM_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        signInFormLoad: false,\r\n        signInForm: action.payload\r\n      };\r\n    }\r\n    case UserTypes.FORM_ERROR: {\r\n      return {\r\n        ...state,\r\n        signInForm: null,\r\n        signInFormLoad: false,\r\n        signInFormError: action.payload,\r\n      };\r\n    }\r\n    case UserTypes.LOGIN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoggingIn: true,\r\n        loginError: null,\r\n      };\r\n    }\r\n    case UserTypes.LOGIN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        isLoggingIn: false,\r\n        loginError: null,\r\n        currentUser: {\r\n          name: action.payload.name,\r\n          token: action.payload.token,\r\n          avatar: action.payload.avatar,\r\n        },\r\n      };\r\n    }\r\n    case UserTypes.LOGIN_ERROR: {\r\n      return {\r\n        ...state,\r\n        isLoggingIn: false,\r\n        loginError: action.payload,\r\n      };\r\n    }\r\n    case UserTypes.SIGNOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isSigningOut: true,\r\n        signOutError: null,\r\n      };\r\n    }\r\n    case UserTypes.SIGNOUT_ERROR: {\r\n      return {\r\n        ...state,\r\n        isSigningOut: false,\r\n        signOutError: action.payload,\r\n      };\r\n    }\r\n    case UserTypes.SIGNOUT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isSigningOut: false,\r\n        signOutError: null,\r\n        isAuthenticated: false,\r\n        currentUser: {\r\n          name: null,\r\n          lastname: null,\r\n          email: null,\r\n          token: null,\r\n        },\r\n      };\r\n    }\r\n    case UserTypes.UPDATE_POSITION_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isUpdatingPosition: true,\r\n        updatingPositionError: null,\r\n      };\r\n    }\r\n    case UserTypes.UPDATE_POSITION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isUpdatingPosition: false,\r\n        updatingPositionError: null,\r\n        currentUser: {\r\n          position: {\r\n            lat: action.payload.lat,\r\n            long: action.payload.long,\r\n          },\r\n        }\r\n      }\r\n    }\r\n    case UserTypes.UPDATE_POSITION_ERROR: {\r\n      return {\r\n        ...state,\r\n        isUpdatingPosition: false,\r\n        updatingPositionError: action.payload,\r\n      };\r\n    }\r\n    case UserTypes.UPDATE_LIKE_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loadingLike: true,\r\n        likeError: null,\r\n      };\r\n    }\r\n    case UserTypes.UPDATE_LIKE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        loadingLike: false,\r\n        likeError: null,\r\n        like: action.payload,\r\n      }\r\n    }\r\n    case UserTypes.UPDATE_LIKE_ERROR: {\r\n      return {\r\n        ...state,\r\n        loadingLike: false,\r\n        likeError: action.payload,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default UserReducer;\r\n","const CommunityTypes = {\r\n  FETCH_NEAR_PEOPLE: \"FETCH_NEAR_PEOPLE\",\r\n  FETCH_NEAR_PEOPLE_ERROR: \"FETCH_NEAR_PEOPLE_ERROR\",\r\n  FETCH_NEAR_PEOPLE_SUCCESS: \"FETCH_NEAR_PEOPLE_SUCCESS\",\r\n  GET_PROFILE_REQUEST : \"GET_PROFILE_REQUEST\",\r\n  GET_PROFILE_SUCCESS : \"GET_PROFILE_SUCCESS\",\r\n  GET_PROFILE_ERROR : \"GET_PROFILE_ERROR\",\r\n  GET_CHATS_REQUEST: \"GET_CHATS_REQUEST\",\r\n  GET_CHATS_SUCCESS: \"GET_CHATS_SUCCESS\",\r\n  GET_CHATS_ERROR: \"GET_CHATS_ERROR\",\r\n  OPEN_CHAT_ROOM_REQUEST: \"OPEN_CHAT_ROOM_REQUEST\",\r\n  OPEN_CHAT_ROOM_SUCCESS: \"OPEN_CHAT_ROOM_SUCCESS\",\r\n  OPEN_CHAT_ROOM_ERROR: \"OPEN_CHAT_ROOM_ERROR\",\r\n};\r\n\r\nexport default CommunityTypes;\r\n","import CommunityTypes from \"./community-types\";\r\n\r\nconst CommunityInitialState = {\r\n  nearPeopleLoading: false,\r\n  nearPeopleLoadingError: null,\r\n  nearPeopleData: null,\r\n  loadingProfile: false,\r\n  profileError: null,\r\n  profile: null,\r\n  chatsLoading: false,\r\n  chatsError: null,\r\n  chats: null,\r\n  openChatLoading: false,\r\n  openChatError: null,\r\n  openChatData: null,\r\n};\r\n\r\nconst CommunityReducer = (state = CommunityInitialState, action) => {\r\n  switch (action.type) {\r\n    case CommunityTypes.FETCH_NEAR_PEOPLE: {\r\n      return {\r\n        ...state,\r\n        nearPeopleLoading: true,\r\n        nearPeopleLoadingError: null,\r\n        nearPeopleData: null,\r\n      };\r\n    }\r\n    case CommunityTypes.FETCH_NEAR_PEOPLE_ERROR: {\r\n      return {\r\n        ...state,\r\n        nearPeopleLoading: false,\r\n        nearPeopleLoadingError: action.payload,\r\n        nearPeopleData: null,\r\n      };\r\n    }\r\n    case CommunityTypes.FETCH_NEAR_PEOPLE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        nearPeopleLoading: false,\r\n        nearPeopleLoadingError: null,\r\n        nearPeopleData: action.payload\r\n      };\r\n    }\r\n    case CommunityTypes.GET_PROFILE_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loadingProfile: true,\r\n        profileError: null,\r\n      };\r\n    }\r\n    case CommunityTypes.GET_PROFILE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        loadingProfile: false,\r\n        profileError: null,\r\n        profile: action.payload,\r\n      }\r\n    }\r\n    case CommunityTypes.GET_PROFILE_ERROR: {\r\n      return {\r\n        ...state,\r\n        loadingProfile: false,\r\n        profileError: action.payload,\r\n      };\r\n    }\r\n    case CommunityTypes.GET_CHATS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        chatsLoading: true,\r\n      };\r\n    }\r\n    case CommunityTypes.GET_CHATS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        chatsLoading: false,\r\n        chats: action.payload\r\n      };\r\n    }\r\n    case CommunityTypes.GET_CHATS_ERROR: {\r\n      return {\r\n        ...state,\r\n        chatsLoading: false,\r\n        chatsError: action.payload,\r\n      };\r\n    }\r\n    case CommunityTypes.OPEN_CHAT_ROOM_REQUEST: {\r\n      return {\r\n        ...state,\r\n        openChatLoading: true,\r\n        openChatError: null,\r\n        openChatData: null,\r\n      };\r\n    }\r\n    case CommunityTypes.OPEN_CHAT_ROOM_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        openChatLoading: false,\r\n        openChatError: null,\r\n        openChatData: action.payload\r\n      };\r\n    }\r\n    case CommunityTypes.OPEN_CHAT_ROOM_ERROR: {\r\n      return {\r\n        ...state,\r\n        openChatLoading: false,\r\n        openChatError: action.payload,\r\n        openChatData: null\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport default CommunityReducer;\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport UserReducer from \"./user/user-reducer\";\r\nimport CommunityReducer from \"./community/community-reducer\";\r\n// import SongReducer from \"./song/song-reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  user: UserReducer,\r\n  // song: SongReducer,\r\n  community: CommunityReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport logger from \"redux-logger\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport rootReducer from \"./root-reducer\";\r\n\r\nconst persistConfig = {\r\n  key: \"tfm-songpair\",\r\n  storage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nconst middleware = [thunk];\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  middleware.push(logger);\r\n}\r\n\r\nconst store = createStore(\r\n  persistedReducer,\r\n  composeWithDevTools(applyMiddleware(...middleware)),\r\n);\r\n\r\nexport const persistor = persistStore(store);\r\n\r\nexport default store;\r\n","import { createSelector } from \"reselect\";\r\n\r\nexport const selectSongState = (state) => state.song;\r\n\r\nexport const songStateSelector = createSelector(\r\n  [selectSongState],\r\n  (songState) => songState,\r\n);\r\n\r\n","const SongTypes = {\r\n  FETCH_SONG_REQUEST: \"FETCH_SONG_REQUEST\",\r\n  FETCH_SONG_ERROR: \"FETCH_SONG_ERROR\",\r\n  FETCH_SONG_SUCCESS: \"FETCH_SONG_SUCCESS\",\r\n  SONG_UPDATING: \"RECIPE_UPDATING\",\r\n  SONG_UPDATING_ERROR: \"RECIPE_UPDATING_ERROR\",\r\n  ADD_SONG_LIKE: \"ADD_SONG_LIKE\",\r\n  REMOVE_SONG_LIKE: \"REMOVE_SONG_LIKE\",\r\n};\r\n\r\nexport default SongTypes;\r\n","import SongTypes from \"./song-types\";\r\n\r\n// import { normalizeSong } from \"../../schema/song-schema\";\r\n\r\nexport const fetchSongRequest = () => ({\r\n  type: SongTypes.FETCH_SONG_REQUEST,\r\n});\r\n\r\nexport const fetchSongError = (errorMessage) => ({\r\n  type: SongTypes.FETCH_SONG_ERROR,\r\n  payload: errorMessage,\r\n});\r\n\r\nexport const fetchSongSuccess = (song) => ({\r\n  type: SongTypes.FETCH_SONG_SUCCESS,\r\n  payload: song,\r\n});\r\n\r\nexport const songUpdating = () => ({\r\n  type: SongTypes.SONG_UPDATING,\r\n});\r\n\r\nexport const songUpdatingError = (errorMessage) => ({\r\n  type: SongTypes.SONG_UPDATING_ERROR,\r\n  payload: errorMessage,\r\n});\r\n\r\nexport const addSongLike = (songID) => ({\r\n  type: SongTypes.ADD_SONG_LIKE,\r\n  payload: {\r\n    songID: songID,\r\n    like: true,\r\n  },\r\n});\r\n\r\nexport const removeSongLike = (songID) => ({\r\n  type: SongTypes.REMOVE_SONG_LIKE,\r\n  payload: {\r\n    songID: songID,\r\n    like: false,\r\n  },\r\n});\r\n\r\n\r\n\r\nexport function fetchSong() {\r\n  return async function fetchSongThunk(dispatch) {\r\n    dispatch(fetchSongRequest());\r\n\r\n    const res = await fetch(`fetch_from_Spotify`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).catch((error) => {\r\n      console.log(error);\r\n      dispatch(fetchSongError(error.message));\r\n    });\r\n\r\n    const songJson = await res.json();\r\n\r\n    if (res.ok) {\r\n      dispatch(fetchSongSuccess(songJson.data));\r\n    } else {\r\n      dispatch(fetchSongError(songJson.error));\r\n    }\r\n  };\r\n}\r\n\r\n\r\n","import './LeftLayers.scss'\r\n\r\nfunction ScreenTransition({active}) {\r\n    return (\r\n      <div>\r\n        <div className={`left-layer ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`left-layer left-layer--2 ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`left-layer left-layer--3 ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`left-layer left-layer--4 ${active ? \"active\" : \"\"}`}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default ScreenTransition;","import { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Container, Row, Col} from 'react-bootstrap';\r\nimport { MusicNoteBeamed } from 'react-bootstrap-icons';\r\nimport LeftLayers from '../components/Transition/LeftLayers'\r\nimport './Welcome.scss';\r\n\r\nfunction Welcome() {\r\n\tconst [transition, setTransition] = useState(false);\r\n\tconst history = useHistory();\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetTransition(true);\r\n\t\tsetTimeout(() => history.push(\"/login\"), 1500);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container fluid className=\"welcome-page\">\r\n\t\t\t<LeftLayers active={transition} />\r\n\t\t\t<Row>\r\n\t\t\t\t<Col xs={8} md={4} lg={1}>\r\n\t\t\t\t\t<div className=\"music-icon move-left\">\r\n\t\t\t\t\t\t<MusicNoteBeamed size={25} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"music-icon move-right\">\r\n\t\t\t\t\t\t<MusicNoteBeamed size={25} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={12}>\r\n\t\t\t\t\t<h1 className=\"text-white\">Songpair</h1>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={8} md={4} lg={2}\r\n\t\t\t\t\tclassName=\"text-white btn btn-primary\"\r\n\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t>\r\n\t\t\t\t\tStart\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col xs={12} className=\"text-center text-secondary\">find others favorite songs</Col>\r\n\t\t\t\t<Col xs={12} className=\"text-center text-secondary\">share yours</Col>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\nexport default Welcome;","import { connect } from \"react-redux\";\r\n\r\nimport {\r\n  songStateSelector,\r\n} from \"../../song/song-selectors\";\r\n\r\nimport { fetchSong } from \"../../song/song-actions\";\r\n\r\nimport Welcome from \"../../../views/home/Welcome\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  songState: songStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchSong: () => dispatch(fetchSong()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Welcome);\r\n","import { createSelector } from \"reselect\";\r\n\r\nexport const selectUser = (state) => state.user;\r\n\r\nexport const currentUserSelector = createSelector(\r\n  [selectUser],\r\n  (user) => user.currentUser,\r\n);\r\n\r\nexport const currentUserStateSelector = createSelector(\r\n  [selectUser],\r\n  (user) => user,\r\n);\r\n","// API domain URL\r\nexport const apiDomain = \"http://localhost:8080/\";\r\n// export const apiDomain = \"https://songpair-backend.herokuapp.com/\";\r\n\r\n\r\n// API sign up redirection\r\nexport const signUpRedirect = apiDomain + \"signup\";\r\n\r\n// API Requests\r\nexport const signInFormURI = apiDomain + \"signup/spotify\";\r\nexport const signUpURI = apiDomain + \"signup\";\r\nexport const loginURI = apiDomain + \"login\";\r\nexport const nearPeopleURI = apiDomain + \"map/near-people\";\r\nexport const updatePosURI = apiDomain + \"map/update-position\";\r\nexport const updateLikeURI = apiDomain + \"like/update\";\r\nexport const getProfileURI = apiDomain + \"profile\";\r\nexport const getChatsURI = apiDomain + \"chats\";\r\n","import UserTypes from \"./user-types\";\r\nimport { signInFormURI, signUpURI, loginURI, updatePosURI, updateLikeURI } from \"../../config/config\";\r\n\r\nexport const resetStoreAndLogOut = () => ({\r\n  type: UserTypes.RESET_STORE_AND_LOG_OUT,\r\n});\r\n\r\nexport const signInFormRequest = () => ({\r\n  type: UserTypes.FORM_REQUEST,\r\n});\r\n\r\nexport const signInFormError = (message) => ({\r\n  type: UserTypes.FORM_ERROR,\r\n  payload: message,\r\n});\r\n\r\nexport const signInFormSuccess = (form) => ({\r\n  type: UserTypes.FORM_SUCCESS,\r\n  payload: form\r\n});\r\n\r\nexport const loginRequest = () => ({\r\n  type: UserTypes.LOGIN_REQUEST,\r\n});\r\n\r\nexport const loginError = (message) => ({\r\n  type: UserTypes.LOGIN_ERROR,\r\n  payload: message,\r\n});\r\n\r\nexport const loginSuccess = ({ name, token, avatar }) => ({\r\n  type: UserTypes.LOGIN_SUCCESS,\r\n  payload: {\r\n    name: name,\r\n    token: token,\r\n    avatar: avatar,\r\n  },\r\n});\r\n\r\nexport const signUpRequest = () => ({\r\n  type: UserTypes.SIGNUP_REQUEST,\r\n});\r\n\r\nexport const signUpError = (message) => ({\r\n  type: UserTypes.SIGNUP_ERROR,\r\n  payload: message,\r\n});\r\n\r\nexport const signupSuccess = ({ name, token, avatar }) => ({\r\n  type: UserTypes.SIGNUP_SUCCESS,\r\n  payload: {\r\n    name: name,\r\n    token: token,\r\n    avatar: avatar,\r\n  },\r\n});\r\n\r\nexport const signoutRequest = () => ({\r\n  type: UserTypes.SIGNOUT_REQUEST,\r\n});\r\n\r\nexport const signoutError = (message) => ({\r\n  type: UserTypes.SIGNOUT_REQUEST,\r\n  payload: message,\r\n});\r\n\r\nexport const signoutSuccess = () => ({\r\n  type: UserTypes.SIGNOUT_SUCCESS,\r\n});\r\n\r\nexport const updateLocationRequest = () => ({\r\n  type: UserTypes.UPDATE_LOCATION_REQUEST\r\n});\r\n\r\nexport const updateLocationSuccess = (point) => ({\r\n  type: UserTypes.UPDATE_LOCATION_SUCCESS,\r\n  payload: {\r\n    point: point\r\n  }\r\n});\r\n\r\nexport const updateLocationError = (message) => ({\r\n  type: UserTypes.UPDATE_LOCATION_ERROR,\r\n  payload: message\r\n});\r\n\r\nexport const updateLikeRequest = () => ({\r\n  type: UserTypes.UPDATE_LIKE_REQUEST\r\n});\r\n\r\nexport const updateLikeSuccess = (like) => ({\r\n  type: UserTypes.UPDATE_LIKE_SUCCESS,\r\n  payload: like\r\n});\r\n\r\nexport const updateLikeError = (message) => ({\r\n  type: UserTypes.UPDATE_LIKE_ERROR,\r\n  payload: message\r\n});\r\n\r\n\r\nexport function signUp({ name, email, password, avatar, token, refreshToken, location, spotifyID }) {\r\n  return async function signUpThunk(dispatch) {\r\n    dispatch(signUpRequest());\r\n\r\n    const res = await fetch(signUpURI, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        email,\r\n        password,\r\n        avatar,\r\n        token,\r\n        refreshToken,\r\n        location,\r\n        spotifyID\r\n      }),\r\n    }).catch((error) => dispatch(signUpError(error.message)));\r\n\r\n    const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(signUpError(error.message)));\r\n\r\n    if (res.ok) {\r\n      dispatch(\r\n        signupSuccess({\r\n          name: resJson.data.user.name,\r\n          token: resJson.data.token,\r\n          avatar: resJson.data.user.avatar,\r\n        }),\r\n      );\r\n    } else {\r\n      dispatch(signUpError(resJson.error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function login({ email, password }) {\r\n  return async function loginThunk(dispatch) {\r\n    dispatch(loginRequest());\r\n\r\n    const res = await fetch(loginURI, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    }).catch((error) => dispatch(loginError(error.message)));\r\n\r\n    const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(signUpError(error.message)));\r\n\r\n    if (res.ok) {\r\n      dispatch(\r\n        loginSuccess({\r\n          name: resJson.data.user.name,\r\n          token: resJson.data.token,\r\n          avatar: resJson.data.user.avatar,\r\n        }),\r\n      );\r\n    } else {\r\n      dispatch(loginError(resJson.error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function signout() {\r\n  return async function logoutThunk(dispatch, getState) {\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n      dispatch(signoutRequest());\r\n\r\n      const res = await fetch(\"http://localhost:8080/logout\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }).catch((error) => dispatch(signoutError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(signoutSuccess());\r\n      }\r\n    } else {\r\n      dispatch(signoutError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function signInForm(code) {\r\n  return async function signInFormThunk(dispatch, getState) {\r\n\r\n    dispatch(signInFormRequest());\r\n\r\n    const res = await fetch(`${signInFormURI}?code=${code}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    }).catch((error) => dispatch(signInFormError(error.message)));\r\n\r\n    const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(signInFormError(error.message)));\r\n\r\n    if (res.ok) {\r\n      dispatch(\r\n        signInFormSuccess(resJson.data.data)\r\n      );\r\n    } else {\r\n      dispatch(signInFormError(resJson.error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateUserLocation(point) {\r\n  return async function updateLocationThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n      dispatch(updateLocationRequest());\r\n\r\n      const res = await fetch(updatePosURI, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          point: point\r\n        }),\r\n      }).catch((error) => dispatch(updateLocationError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(updateLocationSuccess(point));\r\n      }\r\n    } else {\r\n      dispatch(updateLocationError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateLike(song, receiver) {\r\n  return async function updateLikeThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n      dispatch(updateLikeRequest());\r\n\r\n      const res = await fetch(updateLikeURI, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          song: song,\r\n          receiver: receiver\r\n        }),\r\n      }).catch((error) => dispatch(updateLikeError(error.message)));\r\n\r\n      const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(updateLikeError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(updateLikeSuccess(resJson.data.data));\r\n      } else {\r\n        dispatch(updateLikeError(resJson.error));\r\n      }\r\n\r\n    } else {\r\n      dispatch(updateLikeError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\n\r\n","import './DownLayers.scss'\r\n\r\nfunction ScreenTransition({active}) {\r\n    return (\r\n      <div>\r\n        <div className={`down-layer ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`down-layer down-layer--2 ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`down-layer down-layer--3 ${active ? \"active\" : \"\"}`}></div>\r\n        <div className={`down-layer down-layer--4 ${active ? \"active\" : \"\"}`}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default ScreenTransition;","const ROUTES = {\r\n    HOME: \"/\",\r\n    LOGIN: \"/login\",\r\n    REGISTER: \"/signup\",\r\n    DASHBOARD: \"/dashboard\",\r\n    MAP: \"/map\",\r\n    PROFILE: \"/profile/\",\r\n    CHAT: \"/chat/\",\r\n    ROOMS: \"/chats\",\r\n  };\r\n\r\nexport default ROUTES;","import { useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { Container, Row, Col, Form, Spinner} from 'react-bootstrap';\r\nimport DownLayers from '../components/Transition/DownLayers';\r\nimport { signUpRedirect } from '../../config/config';\r\nimport './Login.scss';\r\n\r\nimport ROUTES from '../../utils/routes';\r\n\r\nfunction Login({\r\n  currentUserState: { isLoggingIn, loginError, isAuthenticated } = {},\r\n  login\r\n}) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [formError, setFormError] = useState(false);\r\n  const [transition, setTransition] = useState(false);\r\n\r\n  // Login handle\r\n  const loginHandle = () => {\r\n    if (email === \"\") return setFormError(\"Please, insert your email\")\r\n    if (password === \"\") return setFormError(\"Please, insert a password\")\r\n    if (password.length < 8) return setFormError(\"Password minimun length: 8 chars\")\r\n\r\n    login({email, password});\r\n  }\r\n\r\n  // Animation then redirect to sign up\r\n\tconst handleSignUp = () => {\r\n\t\tsetTransition(true);\r\n\t\tsetTimeout(() => window.location = signUpRedirect, 1500);\r\n  }\r\n\r\n  // Erase errors entering information on inputs\r\n  useEffect(() => {\r\n    setFormError(false);\r\n  }, [password, email]);\r\n\r\n  // Redirect if user is logged\r\n  if (isAuthenticated) {\r\n    return <Redirect to={ROUTES.DASHBOARD} />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"fade-in login-page\">\r\n      <DownLayers active={transition} />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <h1 className=\"text-white\">Soundpair</h1>\r\n        </Col>\r\n        {isLoggingIn ? (\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n        ) : (\r\n          <>\r\n            <Col xs={9} md={5} lg={3} className=\"spotify-btn my-4\">\r\n              Log in with Spotify\r\n            </Col>\r\n            <Col xs={12}>\r\n              <p className=\"text-center text-secondary\">Or use your account</p>\r\n            </Col>\r\n            <Col xs={8} md={5} lg={3}>\r\n              <Form.Control\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                className=\"mb-1\"\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n              <div\r\n                className=\"text-white btn btn-primary w-100\"\r\n                onClick={loginHandle}\r\n              >\r\n                Log in\r\n              </div>\r\n              {formError && <Col xs={12} className=\"badge badge-danger\">{formError}</Col>}\r\n              {loginError && <Col xs={12} className=\"badge badge-danger\">{loginError}</Col>}\r\n            </Col>\r\n            <Col xs={12}>\r\n              <p className=\"text-center text-secondary mt-2\">\r\n                Don't have one? <span\r\n                className=\"text-primary\"\r\n                role=\"button\"\r\n                onClick={handleSignUp}\r\n              >\r\n                Sign up\r\n              </span>\r\n              </p>\r\n            </Col>\r\n          </>\r\n        )}\r\n      </Row>\r\n  </Container>\r\n  );\r\n}\r\n\r\nexport default Login;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { login } from \"../../user/user-actions\";\r\n\r\nimport Login from \"../../../views/auth/Login\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  login: ({ email, password }) => dispatch(login({ email, password })),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","export default __webpack_public_path__ + \"static/media/dummy_avatar.1b809d7e.png\";","import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, Redirect, Link } from 'react-router-dom';\r\nimport { parse } from 'qs';\r\n\r\nimport { Container, Row, Col, Form, Spinner} from 'react-bootstrap';\r\n\r\nimport ROUTES from '../../utils/routes'\r\n\r\nimport './Register.scss';\r\nimport dummyAvatar from '../../assets/accounts/dummy_avatar.png'\r\n\r\nfunction Register({\r\n  currentUserState: { signInForm, signInFormLoad, signInFormError, signUpError, isSigningUp, isAuthenticated } = {},\r\n  fetchFormData, signup\r\n}) {\r\n  const location = useLocation();\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [avatar, setAvatar] = useState(\"\");\r\n  const [coord, setCoord] = useState(\"\");\r\n  const [formError, setFormError] = useState(false);\r\n\r\n  // Fetch user data from Spotify\r\n  useEffect(() => {\r\n    let code = parse(location.search, { ignoreQueryPrefix: true }).code\r\n    fetchFormData(code)\r\n  }, [fetchFormData, location.search]);\r\n\r\n  // Update useStates when fetch from Spotify is done\r\n  useEffect(() => {\r\n    if (signInForm) {\r\n      setName(signInForm.display_name);\r\n      setEmail(signInForm.email);\r\n      setAvatar(signInForm.images[0] ? signInForm.images[0].url : dummyAvatar);\r\n    }\r\n  }, [signInForm]);\r\n\r\n  // Erase errors entering information on inputs\r\n  useEffect(() => {\r\n    setFormError(false);\r\n  }, [coord, password, email, name]);\r\n\r\n  // Check form then send Sign Up to backend\r\n  const signUpHandle = () => {\r\n    if (name === \"\") return setFormError(\"Please, insert your name\")\r\n    if (email === \"\") return setFormError(\"Please, insert your email\")\r\n    if (password === \"\") return setFormError(\"Please, insert a password\")\r\n    if (password.length < 8) return setFormError(\"Password minimun length: 8 chars\")\r\n    if (coord === \"\") return setFormError(\"Please, accept location use\")\r\n\r\n    let newUser = {\r\n      name,\r\n      email,\r\n      password,\r\n      avatar,\r\n      spotifyID: signInForm.id,\r\n      token: signInForm.tokens.access_token,\r\n      refreshToken: signInForm.tokens.refresh_token,\r\n      location: coord,\r\n    }\r\n\r\n    signup(newUser);\r\n  }\r\n\r\n  // Handle geolocation\r\n  const locationHandle = () => {\r\n    const success = (pos) => {\r\n      setCoord({type: \"Point\", coordinates: [pos.coords.longitude, pos.coords.latitude]});\r\n    }\r\n\r\n    const error = (err) => {\r\n      setCoord(\"\");\r\n    }\r\n\r\n    if (coord === \"\") {\r\n      navigator.geolocation.getCurrentPosition(success, error);\r\n    } else {\r\n      setCoord(\"\");\r\n    }\r\n  }\r\n\r\n  // Redirect if user is logged\r\n  if (isAuthenticated) {\r\n    return <Redirect to={ROUTES.DASHBOARD} />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"fade-in register-page\">\r\n      <Row>\r\n        <Col xs={12}>\r\n          <h1 className=\"text-white\">Sign up</h1>\r\n        </Col>\r\n        { (isSigningUp || ( signInFormLoad && !signInForm)) && (\r\n            <Spinner animation=\"border\" variant=\"primary\" />\r\n        )}\r\n        { signInForm && !isSigningUp && (\r\n          <Col xs={8} md={5} lg={3} className=\"text-center text-white\">\r\n            <Form.Control type=\"file\" id=\"avatar\" className=\"d-none\"></Form.Control>\r\n              <label htmlFor=\"avatar\">\r\n                <img\r\n                  src={avatar}\r\n                  alt=\"user avatar\"\r\n                  className=\"avatar\"\r\n                />\r\n              </label>\r\n            <Form.Control\r\n                type=\"name\"\r\n                placeholder=\"Your name\"\r\n                className=\"mb-1\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n            >\r\n            </Form.Control>\r\n            <Form.Control\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              className=\"mb-1\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            >\r\n            </Form.Control>\r\n            <Form.Control\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            >\r\n            </Form.Control>\r\n            <Form.Check\r\n              className=\"mt-3 mb-1\"\r\n              type=\"switch\"\r\n              id=\"location\"\r\n              label=\"Accept geolocation use\"\r\n              onClick={locationHandle}\r\n            />\r\n            {formError && <Col xs={12} className=\"badge badge-danger\">{formError}</Col>}\r\n            {signUpError && <Col xs={12} className=\"badge badge-danger\">{signUpError}</Col>}\r\n            <div\r\n              className=\"text-white btn btn-primary w-100\"\r\n              onClick={signUpHandle}\r\n            >\r\n              Register\r\n            </div>\r\n            <Col xs={12}>\r\n              <p className=\"text-center text-secondary mt-2\">\r\n                Got an account? <Link to={ROUTES.LOGIN}\r\n                className=\"text-primary\"\r\n                role=\"button\"\r\n              >\r\n                Sign In\r\n              </Link>\r\n              </p>\r\n            </Col>\r\n          </Col>\r\n        )}\r\n        { signInFormError && (\r\n          <>\r\n            <Col xs={12} className=\"badge badge-danger\">{signInFormError}</Col>\r\n            <Col xs={8} md={5} lg={3}>\r\n              <Link to={ROUTES.LOGIN}\r\n                className=\"btn btn-primary w-100\"\r\n              >\r\n                Please try again\r\n              </Link>\r\n            </Col>\r\n          </>\r\n        )}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Register;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { signInForm, signUp } from \"../../user/user-actions\";\r\n\r\nimport Signup from \"../../../views/auth/Register\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchFormData: (code) =>\r\n    dispatch(signInForm(code)),\r\n  signup: ({name, email, password, avatar, token, refreshToken, location, spotifyID}) =>\r\n    dispatch(signUp({name, email, password, avatar, token, refreshToken, location, spotifyID})),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);\r\n","import { createSelector } from \"reselect\";\r\n\r\nexport const selectCommunityState = (state) => state.community;\r\n\r\nexport const communityStateSelector = createSelector(\r\n  [selectCommunityState],\r\n  (communityState) => communityState,\r\n);\r\n\r\n","import CommunityTypes from \"./community-types\";\r\nimport { nearPeopleURI, getProfileURI, getChatsURI} from \"../../config/config\";\r\n\r\nexport const fetchNearPeopleRequest = () => ({\r\n  type: CommunityTypes.FETCH_NEAR_PEOPLE,\r\n});\r\n\r\nexport const fetchNearPeopleError = (errorMessage) => ({\r\n  type: CommunityTypes.FETCH_NEAR_PEOPLE_ERROR,\r\n  payload: errorMessage,\r\n});\r\n\r\nexport const fetchNearPeopleSuccess = (nearPeople) => ({\r\n  type: CommunityTypes.FETCH_NEAR_PEOPLE_SUCCESS,\r\n  payload: nearPeople,\r\n});\r\n\r\nexport const getProfileRequest = () => ({\r\n  type: CommunityTypes.GET_PROFILE_REQUEST\r\n});\r\n\r\nexport const getProfileSuccess = (profile) => ({\r\n  type: CommunityTypes.GET_PROFILE_SUCCESS,\r\n  payload: profile\r\n});\r\n\r\nexport const getProfileError = (message) => ({\r\n  type: CommunityTypes.GET_PROFILE_ERROR,\r\n  payload: message\r\n});\r\n\r\nexport const getChatsRequest = () => ({\r\n  type: CommunityTypes.GET_CHATS_REQUEST\r\n});\r\n\r\nexport const getChatsSuccess = (chats) => ({\r\n  type: CommunityTypes.GET_CHATS_SUCCESS,\r\n  payload: chats\r\n});\r\n\r\nexport const getChatsError = (message) => ({\r\n  type: CommunityTypes.GET_CHATS_ERROR,\r\n  payload: message\r\n});\r\n\r\nexport const openRoomRequest = () => ({\r\n  type: CommunityTypes.OPEN_CHAT_ROOM_REQUEST\r\n});\r\n\r\nexport const openRoomSuccess = (room) => ({\r\n  type: CommunityTypes.OPEN_CHAT_ROOM_SUCCESS,\r\n  payload: room\r\n});\r\n\r\nexport const openRoomError = (error) => ({\r\n  type: CommunityTypes.OPEN_CHAT_ROOM_ERROR,\r\n  payload: error\r\n});\r\n\r\nexport function fetchNearPeople(point) {\r\n  return async function fetchNearPeopleThunk(dispatch, getState) {\r\n    dispatch(fetchNearPeopleRequest());\r\n    const token = getState().user.currentUser.token;\r\n\r\n    const res = await fetch(nearPeopleURI,  {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify({\r\n        point: point,\r\n      }),\r\n    }).catch((error) => {\r\n      dispatch(fetchNearPeopleError(error.message));\r\n    });\r\n\r\n    const nearPeopleJson = await res.json();\r\n\r\n    if (res.ok) {\r\n      dispatch(fetchNearPeopleSuccess(nearPeopleJson.data));\r\n    } else {\r\n      dispatch(fetchNearPeopleError(nearPeopleJson.error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function getProfile(id) {\r\n  return async function getProfileThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n      dispatch(getProfileRequest());\r\n\r\n      const res = await fetch(`${getProfileURI}/${id}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      }).catch((error) => dispatch(getProfileError(error.message)));\r\n\r\n      const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(getProfileError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(getProfileSuccess(resJson.data));\r\n      } else {\r\n        dispatch(getProfileError(resJson.error));\r\n      }\r\n\r\n    } else {\r\n      dispatch(getProfileError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateProfile(id) {\r\n  return async function getProfileThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n\r\n      const res = await fetch(`${getProfileURI}/${id}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      }).catch((error) => dispatch(getProfileError(error.message)));\r\n\r\n      const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(getProfileError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(getProfileSuccess(resJson.data));\r\n      } else {\r\n        dispatch(getProfileError(resJson.error));\r\n      }\r\n\r\n    } else {\r\n      dispatch(getProfileError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function getChats(){\r\n  return async function getUserChatsThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n    const id = getState().user.currentUser.id;\r\n\r\n    if (token) {\r\n      dispatch(getChatsRequest());\r\n\r\n      const res = await fetch(`${getChatsURI}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      }).catch((error) => dispatch(getChatsError(error.message)));\r\n\r\n      const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(getChatsError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(getChatsSuccess(resJson.data.data));\r\n      } else {\r\n        dispatch(getChatsError(resJson.error));\r\n      }\r\n\r\n    } else {\r\n      dispatch(getChatsError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function openChatRoom(participant){\r\n  return async function openChatRoomThunk(dispatch, getState) {\r\n\r\n    const token = getState().user.currentUser.token;\r\n\r\n    if (token) {\r\n      dispatch(openRoomRequest());\r\n\r\n      const res = await fetch(`${getChatsURI}/room`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          sender: token,\r\n          receiver: participant\r\n        }),\r\n      }).catch((error) => dispatch(getChatsError(error.message)));\r\n\r\n      const resJson = await res\r\n      .json()\r\n      .catch((error) => dispatch(openRoomError(error.message)));\r\n\r\n      if (res.ok) {\r\n        dispatch(openRoomSuccess(resJson.data));\r\n      } else {\r\n        dispatch(openRoomError(resJson.error));\r\n      }\r\n\r\n    } else {\r\n      dispatch(openRoomError(\"Missing auth token\"));\r\n    }\r\n  };\r\n}\r\n\r\n\r\n","\r\nexport const positionWatcher = (point, updatePosition) => {\r\n    var watcherId, options;\r\n\r\n    function success(pos) {\r\n      var crd = pos.coords;\r\n\r\n      if(measure(crd.latitude, crd.longitude, point.lat, point.long) >= 10){ //established to 10 meters\r\n        updatePosition({lat: crd.latitude, long: crd.longitude});\r\n        navigator.geolocation.clearWatch(watcherId);\r\n      }\r\n    };\r\n\r\n    function error(err) {\r\n      console.warn('ERROR(' + err.code + '): ' + err.message);\r\n    };\r\n\r\n    options = {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };\r\n\r\n    return watcherId = navigator.geolocation.watchPosition(success, error, options);\r\n}\r\n\r\nfunction measure(lat1, lon1, lat2, lon2){  // generally used geo measurement function\r\n    var R = 6378.137; // Radius of earth in KM\r\n    var dLat = lat2 * Math.PI / 180 - lat1 * Math.PI / 180;\r\n    var dLon = lon2 * Math.PI / 180 - lon1 * Math.PI / 180;\r\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n    Math.sin(dLon/2) * Math.sin(dLon/2);\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n    var d = R * c;\r\n    return d * 1000; // meters\r\n}\r\n\r\n","import { Link } from \"react-router-dom\";\r\nimport { Container, Row, Col} from 'react-bootstrap';\r\nimport { ChevronLeft } from 'react-bootstrap-icons';\r\n\r\nimport './Header.scss';\r\n\r\nfunction Header({title, back}) {\r\n    return (\r\n      <Container fluid>\r\n        <Row>\r\n          <Col\r\n            xs={12}\r\n            xl={{span:4, offset:4}}\r\n            className=\"header bg-primary\"\r\n          >\r\n            <Row>\r\n              <Col xs={1}>\r\n                <Link to={back}>\r\n                  <ChevronLeft size={26} color=\"white\" role=\"button\" />\r\n                </Link>\r\n              </Col>\r\n              <Col xs={10}>\r\n    <h2 className=\"text-white\">{title}</h2>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n\r\nexport default Header;","import { useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport { HeartFill, Heart, ChatLeftDots } from 'react-bootstrap-icons';\r\nimport { Row, Col, Spinner } from 'react-bootstrap';\r\nimport { Marker as MarkerIcon, Popup } from 'react-leaflet';\r\n\r\nimport L from 'leaflet';\r\nimport icon from '../../../assets/map/marker.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\nimport ROUTES from \"../../../utils/routes\";\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl:      icon,\r\n    shadowUrl:    iconShadow,\r\n    iconSize:     [62, 62],\r\n    iconAnchor:   [31, 52],\r\n    shadowAnchor: [12, 40],\r\n    popupAnchor:  [0, -45]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nfunction Marker({\r\n  communityState: { openChatLoading, openChatError, openChatData } = {},\r\n  user, updateLike, openChatRoom, appSocket, currentUser\r\n}) {\r\n  const history = useHistory();\r\n\r\n  const long = user.location.coordinates[0]\r\n  const lat = user.location.coordinates[1]\r\n  const { name, avatar, currentSong, like, spotifyID } = user;\r\n\r\n  const [songLike, setSongLike] = useState(like);\r\n\r\n  function handleLike() {\r\n    updateLike(currentSong, user.spotifyID);\r\n    setSongLike(!songLike);\r\n  }\r\n\r\n  async function handleChat(){\r\n    await openChatRoom(spotifyID);\r\n\r\n    if (openChatData) {\r\n      appSocket.emit('newChat', {sender: currentUser.name, receiver: spotifyID, room: openChatData._id})\r\n      history.push(ROUTES.CHAT + openChatData._id);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MarkerIcon position={[lat, long]} >\r\n        <Popup>\r\n            <Row className=\"mb-2 user-row\">\r\n                <Col xs={1}>\r\n                  <img\r\n                      src={avatar}\r\n                      className=\"avatar\"\r\n                      alt=\"user avatar\"\r\n                  />\r\n                </Col>\r\n                <Col xs={8} className=\"username-container\">\r\n                  <Link to={ROUTES.PROFILE + spotifyID}>{name}</Link>\r\n                </Col>\r\n                <Col xs={2}>\r\n                  {openChatLoading ? (\r\n                    <Spinner\r\n                      size=\"sm\"\r\n                      animation=\"border\"\r\n                      variant=\"white\"\r\n                    />\r\n                  ) : (\r\n                    <ChatLeftDots\r\n                      size={18}\r\n                      className=\"chat-icon\"\r\n                      color=\"white\"\r\n                      onClick={handleChat}\r\n                    />\r\n                  )}\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col xs={2}>\r\n                <img\r\n                    src={currentSong.image[0].url}\r\n                    className=\"album-img\"\r\n                    alt=\"artist album\"\r\n                />\r\n              </Col>\r\n              <Col xs={7} className=\"ml-2\">\r\n                <div className=\"music-title\">{currentSong.music}</div>\r\n                <div className=\"artist-name\">{currentSong.artist}</div>\r\n              </Col>\r\n              <Col xs={2}>\r\n                {songLike ? (\r\n                  <HeartFill\r\n                    size={20}\r\n                    color=\"crimson\"\r\n                    className=\"like-icon bounce-effect\"\r\n                    role=\"button\"\r\n                    onClick={handleLike}\r\n                  />\r\n                ):(\r\n                  <Heart\r\n                    size={20}\r\n                    color=\"crimson\"\r\n                    className=\"like-icon bounce-effect\"\r\n                    role=\"button\"\r\n                    onClick={handleLike}\r\n                  />\r\n                )}\r\n              </Col>\r\n            </Row>\r\n        </Popup>\r\n    </MarkerIcon>\r\n  );\r\n}\r\n\r\nexport default Marker;","export default \"data:image/png;base64,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\"","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { communityStateSelector } from \"../../community/community-selectors\";\r\n\r\nimport { updateLike } from \"../../user/user-actions\";\r\n\r\nimport Marker from \"../../../views/components/Marker/Marker\";\r\nimport { openChatRoom } from \"../../community/community-actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n  communityState: communityStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  updateLike: (song, receiver) => dispatch(updateLike(song, receiver)),\r\n  openChatRoom: (participant) => dispatch(openChatRoom(participant))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Marker);\r\n","import { useState, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { positionWatcher } from \"../../utils/watchPosition\";\r\n\r\nimport { MapContainer as Map, TileLayer, useMap } from \"react-leaflet\";\r\nimport { Container, Row, Col, Spinner} from \"react-bootstrap\";\r\n\r\nimport Header from \"../components/Header/Header\";\r\nimport Marker from \"../../redux/containers/components/MarkerContainer\";\r\n\r\nimport ROUTES from \"../../utils/routes\";\r\n\r\nimport \"./Map.scss\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n\r\nfunction MapView({\r\n\tcurrentUserState: { isAuthenticated, currentUser } = {},\r\n\tcommunityState: { nearPeopleLoading, nearPeopleLoadingError, nearPeopleData } = {},\r\n\tfetchNearPeople, appSocket\r\n}) {\r\n\tconst [point, setPoint] = useState(null);\r\n\tconst [pointError, setPointError] = useState(null);\r\n\tconst [moved, setMoved] = useState(false);\r\n\r\n\tfunction ChangeView({center, active}) {\r\n\t\tconst map = useMap();\r\n\t\tif (point && active) {\r\n\t\t\tmap.setView([center.lat, center.long]);\r\n\t\t}\r\n\t\tuseEffect(() => {\r\n\t\t\tif (active) setMoved(false);\r\n\t\t}, [active]);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (point) {\r\n\t\t\tfetchNearPeople(point);\r\n\t\t\tvar watcher = positionWatcher(point, setPoint);\r\n\t\t} else {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(\r\n\t\t\t\t(pos) => setPoint({lat: pos.coords.latitude, long: pos.coords.longitude}),\r\n\t\t\t\t(err) => setPointError(err)\r\n\t\t\t);\r\n\t\t}\r\n\t\tsetMoved(true);\r\n\r\n\t\treturn function () {\r\n\t\t\t\tnavigator.geolocation.clearWatch(watcher)\r\n\t\t}\r\n\t}, [point, fetchNearPeople]);\r\n\r\n\t// Redirect if not logged\r\n\tif (!isAuthenticated) {\r\n\t\treturn <Redirect to={ROUTES.LOGIN} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<Header title=\"Near People\" back={ROUTES.DASHBOARD} />\r\n\t\t<Container fluid className=\"map-page\">\r\n\t\t\t<Row className=\"map-row text-center\">\r\n\t\t\t\t<Col xs={12} md={11} lg={11} xl={4}>\r\n\t\t\t\t\t{point ? (\r\n\t\t\t\t\t\t<Map\r\n\t\t\t\t\t\t\tclassName=\"map-container\"\r\n\t\t\t\t\t\t\tcenter={[point.lat, point.long]}\r\n\t\t\t\t\t\t\tzoom={100} scrollWheelZoom={false}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChangeView center={point} active={moved}/>\r\n\t\t\t\t\t\t\t{ nearPeopleLoading ? (\r\n\t\t\t\t\t\t\t\t<Row className=\"d-flex align-items-center h-100\">\r\n\t\t\t\t\t\t\t\t\t<Col><Spinner animation=\"grow\" variant=\"primary\"/></Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tnearPeopleLoadingError ?\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t<Row className=\"d-flex align-items-center h-100\">\r\n\t\t\t\t\t\t\t\t\t\t<Col><p className=\"h5\">{nearPeopleLoadingError}, please try again.</p></Col>\r\n\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<TileLayer\r\n\t\t\t\t\t\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n\t\t\t\t\t\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{nearPeopleData &&\r\n\t\t\t\t\t\t\t\t\t\t\tnearPeopleData.map((user) =>\r\n\t\t\t\t\t\t\t\t\t\t\t<Marker\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={user.spotifyID}\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\t\t\tappSocket={appSocket}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Map>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Container fluid className=\"map-container\">\r\n\t\t\t\t\t\t\t<Row className=\"d-flex align-items-center h-100 text-white\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t{pointError && (\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"h5\">Could not access your geolocation, please try again.</p>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MapView;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { communityStateSelector } from \"../../community/community-selectors\";\r\n\r\nimport { fetchNearPeople, openChatRoom } from \"../../community/community-actions\";\r\n\r\nimport Map from \"../../../views/map/Map\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n  communityState: communityStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchNearPeople: (point) => dispatch(fetchNearPeople(point))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);\r\n","import { useState, useEffect } from \"react\";\r\nimport { positionWatcher } from \"../utils/watchPosition\";\r\n\r\nexport default function useUpdateLocation(updateUserLocation){\r\n\r\n\tconst [coords, setCoords] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (coords) {\r\n\t\t\tvar watcherId = positionWatcher(coords, setCoords);\r\n\t\t\tupdateUserLocation(coords)\r\n\t\t} else {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((pos) => setCoords({lat: pos.coords.latitude, long: pos.coords.longitude}) );\r\n\t\t}\r\n\r\n\t\treturn function () {\r\n\t\t\tnavigator.geolocation.clearWatch(watcherId)\r\n\t\t}\r\n\t}, [coords, updateUserLocation]);\r\n}\r\n","import { Redirect, Link } from \"react-router-dom\";\r\nimport useUpdateLocation from \"../../hooks/useUpdateLocation\"\r\n\r\nimport { ChatLeftDotsFill, GeoFill, Power } from \"react-bootstrap-icons\"\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\n\r\nimport \"./Dashboard.scss\"\r\nimport ROUTES from \"../../utils/routes\";\r\n\r\nfunction Dashboard({\r\n  currentUserState: { currentUser, isAuthenticated } = {},\r\n  logout, updateUserLocation\r\n}) {\r\n\r\n  useUpdateLocation(updateUserLocation);\r\n\r\n  // Redirect if not logged\r\n  if (!isAuthenticated) {\r\n    return <Redirect to={ROUTES.LOGIN} />;\r\n  }\r\n\r\n   // Logout handler\r\n   const logoutHandler = () => {\r\n    logout();\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"dashboard py-3\">\r\n        <Row className=\"header\">\r\n          <Col>\r\n            <div className=\"logo\">Songpair</div>\r\n          </Col>\r\n          <Col className=\"text-right\">\r\n            <Power role=\"button\" size={25} onClick={logoutHandler}/>\r\n          </Col>\r\n          <Col xs={12} className=\"text-center fade-in\">\r\n            <img className=\"avatar\" src={currentUser.avatar} alt=\"user avatar\"></img>\r\n            <span className=\"username\">{currentUser.name}</span>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"menu\">\r\n          <Col xs={12}>\r\n            <Link to={ROUTES.MAP}>\r\n              <GeoFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={12} className=\"mt-4\">\r\n            <Link to={ROUTES.ROOMS}>\r\n              <ChatLeftDotsFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n        </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { signout, updateUserLocation } from '../../user/user-actions';\r\n\r\nimport Dashboard from \"../../../views/dashboard/Dashboard\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  logout: () => dispatch(signout()),\r\n  updateUserLocation: (point) => dispatch(updateUserLocation(point)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n","import { useEffect } from \"react\";\r\nimport { Redirect, useParams } from \"react-router-dom\";\r\nimport useUpdateLocation from \"../../hooks/useUpdateLocation\"\r\n\r\nimport { Container, Row, Col, Spinner } from 'react-bootstrap';\r\nimport { HeartFill, Heart, MusicNoteList, ExclamationTriangleFill, EmojiFrownFill } from 'react-bootstrap-icons';\r\nimport Header from \"../components/Header/Header\";\r\n\r\nimport ROUTES from \"../../utils/routes\";\r\nimport \"./Profile.scss\";\r\n\r\nfunction Profile({\r\n  currentUserState: { currentUser, isAuthenticated } = {},\r\n  communityState: { profile, loadingProfile, profileError } = {},\r\n  updateUserLocation, getProfile, updateLike, updateProfile\r\n}) {\r\n  const { id } = useParams();\r\n\r\n  useUpdateLocation(updateUserLocation);\r\n\r\n  useEffect(() => {\r\n\t\tgetProfile(id);\r\n  }, [getProfile, id]);\r\n\r\n  async function handleLike() {\r\n    profile.currentSong.like = !profile.currentSong.like;\r\n    await updateLike(profile.currentSong, id);\r\n    updateProfile(id);\r\n  }\r\n\r\n  // Redirect if not logged\r\n  if (!isAuthenticated) {\r\n    return <Redirect to={ROUTES.LOGIN} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header title=\"Profile\" back={ROUTES.MAP} />\r\n      <Container fluid>\r\n          <Row>\r\n            <Col\r\n              xs={12}\r\n              md={{ span: 8, offset: 2}}\r\n              lg={{ span: 6, offset: 3}}\r\n              xl={{ span: 4, offset: 4}}\r\n            >\r\n              { (profile && !loadingProfile && !profileError) && (\r\n                <Row className=\"profile-page fade-in\">\r\n                  <Col xs={12} className=\"avatar\">\r\n                    <img src={profile.avatar} alt=\"user avatar\" />\r\n                    <h4>{profile.name}</h4>\r\n                  </Col>\r\n                  <Col xs={11}>\r\n                    <Col xs={12} className=\"text-center\">Currently playing</Col>\r\n                    <Row className=\"playing\">\r\n                      { profile.currentSong ? (\r\n                        <>\r\n                          <Col xs={3}>\r\n                            <img src={profile.currentSong.image[0].url} alt=\"album\" />\r\n                          </Col>\r\n                          <Col xs={6} xl={7} className=\"music\">\r\n                            <div className=\"music-title\">{profile.currentSong.music}</div>\r\n                            <div>{profile.currentSong.artist}</div>\r\n                          </Col>\r\n                          <Col xs={3} xl={2} className=\"music-actions\">\r\n                            <div>\r\n                              { profile.currentSong.like ? (\r\n                                <HeartFill\r\n                                  className=\"bounce-effect\"\r\n                                  role=\"button\"\r\n                                  color=\"crimson\"\r\n                                  onClick={handleLike}\r\n                                />\r\n                                ) : (\r\n                                <Heart\r\n                                  className=\"bounce-effect\"\r\n                                  role=\"button\"\r\n                                  color=\"crimson\"\r\n                                  onClick={handleLike}\r\n                                />\r\n                              )}\r\n                              <span>{ profile.currentSong.totalLikes }</span>\r\n                            </div>\r\n                            <div><MusicNoteList /><span>Add</span></div>\r\n                          </Col>\r\n                        </>\r\n                        ) : (\r\n                          <Col xs={12} className=\"text-center\">No song</Col>\r\n                        )}\r\n                      </Row>\r\n                  </Col>\r\n                  <Col xs={11}>\r\n                    <Row className=\"status\">\r\n                      <Col xs={3} className=\"total-likes\">\r\n                        <Row>\r\n                          <Col xs={12}><h5>Total Likes</h5></Col>\r\n                          <Col xs={12}><HeartFill color=\"crimson\"/></Col>\r\n                          <Col xs={12}>{profile.likes.total}</Col>\r\n                        </Row>\r\n                      </Col>\r\n                      <Col xs={8} className=\"most-liked\">\r\n                        <Row>\r\n                          <Col xs={12}><h5>Most Liked Song</h5></Col>\r\n                          { profile.likes.mostLiked ? (\r\n                            <>\r\n                              <Col xs={6}>\r\n                                <img src={profile.likes.mostLiked.image[0].url} alt=\"album\" />\r\n                              </Col>\r\n                              <Col xs={6} className=\"music\">\r\n                                <div className=\"music-title\">{profile.likes.mostLiked.music}</div>\r\n                                <div>{profile.likes.mostLiked.artist}</div>\r\n                                <div><HeartFill color=\"crimson\" /><span>{profile.likes.mostLiked.likesCount}</span></div>\r\n                              </Col>\r\n                            </>\r\n                          ):(\r\n                            <Col xs={12} className=\"text-center\">\r\n                              <div>No likes yet</div>\r\n                              <EmojiFrownFill />\r\n                            </Col>\r\n                          )}\r\n                        </Row>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col xs={11} className=\"text-white btn btn-primary w-100\">\r\n                    Message\r\n                  </Col>\r\n                </Row>\r\n              )}\r\n              { loadingProfile && (\r\n                <Row className=\"songpair-load\">\r\n                  <Col xs={12}><h2>Songpair</h2></Col>\r\n                  <Spinner animation=\"border\" variant=\"primary\" />\r\n                </Row>\r\n              )}\r\n              { profileError && (\r\n                <Row className=\"songpair-load\">\r\n                  <Col xs={12}><h2>User not found :(</h2></Col>\r\n                  <ExclamationTriangleFill />\r\n                </Row>\r\n              )}\r\n            </Col>\r\n          </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Profile;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { communityStateSelector } from \"../../community/community-selectors\";\r\n\r\nimport { updateUserLocation, updateLike } from '../../user/user-actions';\r\nimport { getProfile, updateProfile } from '../../community/community-actions';\r\n\r\nimport Profile from \"../../../views/profile/Profile\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n  communityState: communityStateSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  updateUserLocation: (point) => dispatch(updateUserLocation(point)),\r\n  getProfile: (id) => dispatch(getProfile(id)),\r\n  updateProfile: (id) => dispatch(updateProfile(id)),\r\n  updateLike: (song, receiver) => dispatch(updateLike(song, receiver)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n\r\n","import { Redirect, Link } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport useUpdateLocation from \"../../hooks/useUpdateLocation\"\r\n\r\nimport { ChatLeftDotsFill} from \"react-bootstrap-icons\"\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\n\r\nimport Header from \"../components/Header/Header\";\r\n\r\nimport \"./Chats.scss\"\r\nimport ROUTES from \"../../utils/routes\";\r\n\r\nfunction ChatsView({\r\n  currentUserState: { currentUser, isAuthenticated } = {},\r\n  getChats, updateUserLocation\r\n}) {\r\n\r\n  useUpdateLocation(updateUserLocation);\r\n\r\n  useEffect(() => {\r\n    getChats();\r\n  }, [getChats]);\r\n\r\n  // Redirect if not logged\r\n  if (!isAuthenticated) {\r\n    return <Redirect to={ROUTES.LOGIN} />;\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header title=\"Join Chat\" back={ROUTES.DASHBOARD} />  \r\n    <Container fluid className=\"chat py-3\">\r\n        <Row className=\"header\">          \r\n          <Col xs={12} className=\"text-center\">\r\n            <span className=\"username\">Select Chat Room</span>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"menu\">\r\n          <Col xs={12} className=\"mt-4\">\r\n            <Link to=\"/chat/1\">\r\n              <ChatLeftDotsFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={12} className=\"mt-4\">\r\n            <Link to=\"/chat/2\">\r\n              <ChatLeftDotsFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={12} className=\"mt-4\">\r\n            <Link to=\"/chat/3\">\r\n              <ChatLeftDotsFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={12} className=\"mt-4\">\r\n            <Link to=\"/chat/4\">\r\n              <ChatLeftDotsFill color=\"white\" size={100}/>\r\n            </Link>\r\n          </Col>\r\n        </Row>\r\n    </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatsView;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\nimport { updateUserLocation } from '../../user/user-actions';\r\nimport { getChats } from '../../community/community-actions';\r\n\r\nimport Chats from \"../../../views/chat/Chats\";\r\n\r\nconst chatsStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n});\r\n\r\nconst chatsDispatchToProps = (dispatch) => ({\r\n  getChats: () => dispatch(getChats()),\r\n  updateUserLocation: (point) => dispatch(updateUserLocation(point)),\r\n});\r\n\r\nexport default connect(chatsStateToProps, chatsDispatchToProps)(Chats);\r\n","import React from 'react';\r\n\r\nimport './Message.scss';\r\n\r\nimport ReactEmoji from 'react-emoji';\r\n\r\nconst Message = ({ message: { text, user }, name }) => {\r\n  let isSentByCurrentUser = false;\r\n\r\n  const trimmedName = name.trim().toLowerCase();\r\n\r\n  if(user === trimmedName) {\r\n    isSentByCurrentUser = true;\r\n  }\r\n\r\n  return (\r\n    isSentByCurrentUser\r\n      ? (\r\n        <div className=\"messageContainer justifyEnd\">\r\n          <p className=\"sentText pr-10\">{trimmedName}</p>\r\n          <div className=\"messageBox backgroundBlue\">\r\n            <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\r\n          </div>\r\n        </div>\r\n        )\r\n        : (\r\n          <div className=\"messageContainer justifyStart\">\r\n            <div className=\"messageBox backgroundLight\">\r\n              <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\r\n            </div>\r\n            <p className=\"sentText pl-10 \">{user}</p>\r\n          </div>\r\n        )\r\n  );\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\n\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nimport Message from './Message/Message';\r\n\r\nimport './Messages.scss';\r\n\r\nconst Messages = ({ messages, name }) => (\r\n  <ScrollToBottom className=\"messages\">\r\n    {messages.map((message, i) => <div key={i}><Message message={message} name={name}/></div>)}\r\n  </ScrollToBottom>\r\n);\r\n\r\nexport default Messages;","import React from 'react';\r\n\r\nimport onlineIcon from '../../../assets/icons/onlineIcon.png';\r\nimport closeIcon from '../../../assets/icons/closeIcon.png';\r\n\r\nimport './InfoBar.scss';\r\n\r\nconst InfoBar = ({ room }) => (\r\n  <div className=\"infoBar\">\r\n    <div className=\"leftInnerContainer\">\r\n      <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n      <h3>Room {room}</h3>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default InfoBar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","import React from 'react';\r\n\r\nimport './Input.scss';\r\n\r\nconst Input = ({ setMessage, sendMessage, message }) => (\r\n  <form className=\"form\">\r\n    <input\r\n      className=\"input\"\r\n      type=\"text\"\r\n      placeholder=\"Type a message...\"\r\n      value={message}\r\n      onChange={({ target: { value } }) => setMessage(value)}\r\n      onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n    />\r\n    <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n  </form>\r\n)\r\n\r\nexport default Input;","import React, { useState, useEffect } from \"react\";\r\nimport { Redirect, useParams } from \"react-router-dom\";\r\n\r\nimport Header from \"../components/Header/Header\";\r\nimport Messages from '../components/Messages/Messages';\r\nimport InfoBar from '../components/InfoBar/InfoBar';\r\nimport Input from '../components/Input/Input';\r\n\r\nimport ROUTES from \"../../utils/routes\";\r\n\r\nimport './ChatRoom.scss';\r\n\r\nfunction ChatRoom({\r\n  currentUserState: { isAuthenticated, currentUser } = {},\r\n  appSocket\r\n}) {\r\n  const {room} = useParams();\r\n  const user = currentUser;\r\n\r\n  const [connected, setConnected] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    appSocket.on('message', message => {\r\n      console.log(message);\r\n      setMessages(messages => [ ...messages, message ]);\r\n    });\r\n\r\n    return () => {\r\n      appSocket.emit('leaveChat', { user, room });\r\n      appSocket.off();\r\n    }\r\n  },[]);\r\n\r\n  const connect = () => {\r\n    appSocket.emit('join', { user, room }, (error) => {\r\n      if(error) alert(error);\r\n      setConnected(true);\r\n    });\r\n  }\r\n\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n\r\n    if(message) {\r\n      setMessages(messages => [ ...messages, {user: \"You\", text: message} ]);\r\n      appSocket.emit('sendMessage', { user, room, message } , () => setMessage(''));\r\n    }\r\n  }\r\n\r\n\t// Redirect if not logged\r\n\tif (!isAuthenticated) {\r\n\t\treturn <Redirect to={ROUTES.LOGIN} />;\r\n\t}\r\n\r\n  return (\r\n    <>\r\n    <Header title=\"Chat Room\" back={ROUTES.ROOMS} />\r\n    <div className=\"outerContainer\">\r\n      <div className=\"container\">\r\n          <InfoBar room={\"\"} />\r\n          { !connected ? (\r\n              <div className=\"btn btn-primary mb-4\" onClick={connect}>Join chat</div>\r\n            ) : (\r\n              <>\r\n                <Messages messages={messages} name={user.name} />\r\n                <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n              </>\r\n            )\r\n          }\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatRoom;","import { connect } from \"react-redux\";\r\n\r\nimport { currentUserStateSelector } from \"../../user/user-selectors\";\r\n\r\nimport { getChats } from '../../community/community-actions';\r\n\r\nimport ChatRoom from \"../../../views/chat/ChatRoom\";\r\n\r\nconst chatRoomStateToProps = (state) => ({\r\n  currentUserState: currentUserStateSelector(state),\r\n});\r\n\r\nconst chatRoomDispatchToProps = (dispatch) => ({\r\n  getChats: () => dispatch(getChats()),\r\n});\r\n\r\nexport default connect(chatRoomStateToProps, chatRoomDispatchToProps)(ChatRoom);\r\n","import { useState } from \"react\";\r\nimport { Container, Row, Col} from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport ROUTES from \"../../../utils/routes\"\r\n\r\nimport './Notification.scss';\r\n\r\nfunction Notification({msg, room}) {\r\n  const history = useHistory();\r\n\r\n  const [hide, setHide] = useState(false);\r\n\r\n  function handleNotification() {\r\n    history.push(ROUTES.CHAT + room);\r\n    setHide(true);\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        <Col\r\n          xs={12}\r\n          className={`notification bg-secondary fade-in ${hide && 'fade-out'}`}\r\n          onClick={handleNotification}\r\n        >\r\n          {msg}\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Notification;","import React, { useState } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { useSelector } from \"react-redux\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport WelcomeContainer from \"./redux/containers/pages/WelcomeContainer\";\r\nimport LoginContainer from \"./redux/containers/pages/LoginContainer\";\r\nimport RegisterContainer from \"./redux/containers/pages/RegisterContainer\";\r\nimport MapContainer from \"./redux/containers/pages/MapContainer\";\r\nimport DashboardContainer from \"./redux/containers/pages/DashboardContainer\";\r\nimport ProfileContainer from \"./redux/containers/pages/ProfileContainer\";\r\nimport ChatsContainer from \"./redux/containers/pages/ChatsContainer\";\r\nimport ChatRoomContainer from \"./redux/containers/pages/ChatRoomContainer\";\r\nimport Notification from \"./views/components/Notification/Notification\";\r\n\r\nimport ROUTES from \"./utils/routes\";\r\nimport {apiDomain} from './config/config';\r\n\r\nfunction App() {\r\n  const { user } = useSelector((state) => state);\r\n  const [notification, setNotification] = useState(null);\r\n\r\n  const socket = user.currentUser.token ? io(apiDomain, {withCredentials: true, query: `token=${user.currentUser.token}`}) : null;\r\n\r\n  if (socket) {\r\n    socket.on('newMessage', async ({ sender, room }) => {\r\n      setNotification({msg:`New chat request from ${sender}!`, room: room});\r\n      setTimeout( () => setNotification(null), 10000 );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route path={ROUTES.HOME} exact>\r\n          <WelcomeContainer />\r\n        </Route>\r\n        <Route path={ROUTES.LOGIN}>\r\n          <LoginContainer />\r\n        </Route>\r\n        <Route path={ROUTES.DASHBOARD}>\r\n          <DashboardContainer />\r\n        </Route>\r\n        <Route path={ROUTES.PROFILE + \":id\"}>\r\n          <ProfileContainer />\r\n        </Route>\r\n        <Route path={ROUTES.MAP}>\r\n          <MapContainer appSocket={socket} />\r\n        </Route>\r\n        <Route path={ROUTES.REGISTER}>\r\n          <RegisterContainer />\r\n        </Route>\r\n        <Route path={ROUTES.ROOMS}>\r\n          <ChatsContainer />\r\n        </Route>\r\n        <Route path={ROUTES.CHAT + \":room\"}>\r\n          <ChatRoomContainer appSocket={socket} />\r\n        </Route>\r\n      </Switch>\r\n      { notification &&\r\n        <Notification msg={notification.msg} room={notification.room} />\r\n      }\r\n      </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport store from \"./redux/store\";\r\nimport { persistor } from \"./redux/store\";\r\n\r\nimport App from \"./App\";\r\n\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </Provider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\"),\r\n);"],"sourceRoot":""}